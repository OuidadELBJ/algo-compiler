Algorithme TEST_FULL_OPTIONS_ACCENTS
Objets:
    // ===== Constantes =====
    N : Constante entier = 5
    M : Constante entier = 3

    // ===== Variables =====
    i : Variable entier
    j : Variable entier
    x : Variable entier
    y : Variable entier
    r : Variable réel
    ok : Variable booléen
    c : Variable caractère
    msg : Variable chaîne

    // ===== Tableaux =====
    t : Tableau entier[N]
    mat : Tableau entier[N][M]
    tc : Tableau caractère[N]

    // ===== Structures =====
    p : Variable Personne
    tabP : Tableau Personne[N]

Début

    // ==========================================================
    // 1) STRUCTURES
    // ==========================================================
    Structure Adresse
        rue : chaîne
        ville : chaîne
        codePostal : entier
    Fin-struct

    Structure Personne
        nom : chaîne
        age : entier
        estEtudiant : booléen
        adresse : Adresse
    Fin-struct

    // ==========================================================
    // 2) FONCTIONS / PROCÉDURES
    // ==========================================================

    Fonction Factorielle(n : entier) : entier
    Objets:
        res : Variable entier
    Début
        Si n <= 1 Alors
            Retourner 1
        Sinon
            res <- n * Factorielle(n - 1)
            Retourner res
        FinSi
    FinFonct

    Fonction Puissance(base : réel, exp : entier) : réel
    Objets:
        k : Variable entier
        acc : Variable réel
    Début
        acc <- 1.0
        Pour k <- 1 jusqu'à exp
            acc <- acc * base
        FinPour
        Retourner acc
    FinFonct

    Fonction PGCD(a : entier, b : entier) : entier
    Objets:
        tmp : Variable entier
    Début
        TantQue b <> 0
            tmp <- b
            b <- a Mod b
            a <- tmp
        FinTantQue
        Retourner a
    FinFonct

    Fonction EstPair(n : entier) : booléen
    Début
        Retourner (n Mod 2 = 0)
    FinFonct

    Procédure RemplirDouble(tin : Tableau entier[], taille : entier)
    Objets:
        k : Variable entier
    Début
        Pour k <- 0 jusqu'à taille - 1
            tin[k] <- k * 2
        FinPour
    FinProc

    Procédure RemplirMatrice(a : Tableau entier[][], n : entier, m : entier)
    Objets:
        ii : Variable entier
        jj : Variable entier
    Début
        Pour ii <- 0 jusqu'à n - 1
            Pour jj <- 0 jusqu'à m - 1
                a[ii][jj] <- ii + jj
            FinPour
        FinPour
    FinProc

    Procédure DemoSelon(val : entier)
    Début
        Selon val
            Cas 0:
                Ecrire("val=0")
            Cas 1, 2:
                Ecrire("val=1 ou 2")
            Cas 3:
                Ecrire("val=3")
            Défaut:
                Ecrire("val autre")
        FinSelon
    FinProc

    // ==========================================================
    // 3) MAIN : TESTS COMPLETS
    // ==========================================================

    // --- UTF-8 / Accents / Chaînes ---
    msg <- "Début du test complet : éàçù ô î – سلام"
    Ecrire(msg)

    // --- Lecture (I/O) ---
    Ecrire("Entrer un entier x :")
    Lire(x)

    Ecrire("Entrer un caractère c :")
    Lire(c)

    // --- Affectations + arithmétique + priorité + unaire ---
    // x <- 2 + 3*4 - (5+1)*2
    x <- 2 + 3 * 4 - (5 + 1) * 2
    Ecrire("x=", x)

    x <- -x
    Ecrire("x neg=", x)

    // --- Booléens : comparaisons + Et/Ou/Non ---
    ok <- (x >= 0) Et Non(x <> 0) Ou Faux
    Si ok Alors
        Ecrire("OK: logique")
    SinonSi x < 0 Alors
        Ecrire("x est négatif")
    Sinon
        Ecrire("Autre cas")
    FinSi

    // --- Pour + Quitter Pour ---
    r <- 0.0
    Pour i <- 0 jusqu'à N - 1
        Si i = 3 Alors
            Quitter Pour
        FinSi
        r <- r + i
    FinPour
    Ecrire("Somme partielle r=", r)

    // --- TantQue + Sortir ---
    i <- 0
    TantQue Vrai
        i <- i + 1
        Si i = 2 Alors
            Sortir
        FinSi
    FinTantQue
    Ecrire("i après Sortir=", i)

    // --- Répéter ... TantQue (do-while) ---
    j <- 0
    Répéter
        j <- j + 1
    TantQue j < 3
    Ecrire("j après Répéter=", j)

    // --- Tableaux 1D + index ---
    RemplirDouble(t, N)
    Ecrire("Tableau t:")
    Pour i <- 0 jusqu'à N - 1
        Ecrire("t[", i, "]=", t[i])
    FinPour

    // --- Tableau de caractères ---
    Pour i <- 0 jusqu'à N - 1
        tc[i] <- c
    FinPour
    Ecrire("tc:")
    Pour i <- 0 jusqu'à N - 1
        Ecrire("tc[", i, "]=", tc[i])
    FinPour

    // --- Matrice 2D + double index ---
    RemplirMatrice(mat, N, M)
    Ecrire("Matrice mat:")
    Pour i <- 0 jusqu'à N - 1
        Pour j <- 0 jusqu'à M - 1
            Ecrire("mat[", i, "][", j, "]=", mat[i][j])
        FinPour
    FinPour

    // --- Structures + champs imbriqués ---
    p.nom <- "Ali"
    p.age <- 20
    p.estEtudiant <- Vrai
    p.adresse.rue <- "Rue 1"
    p.adresse.ville <- "Casa"
    p.adresse.codePostal <- 20000

    Ecrire("Personne p: ", p.nom, " ", p.age, " ", p.estEtudiant)
    Ecrire("Adresse: ", p.adresse.rue, " ", p.adresse.ville, " ", p.adresse.codePostal)

    // --- Tableau de structures + bool + mod ---
    Pour i <- 0 jusqu'à N - 1
        tabP[i].nom <- "P"
        tabP[i].age <- 18 + i
        tabP[i].estEtudiant <- EstPair(i)
        tabP[i].adresse.ville <- "Ville"
        tabP[i].adresse.codePostal <- 10000 + i
    FinPour

    Ecrire("=== Étudiants dans tabP ===")
    Pour i <- 0 jusqu'à N - 1
        Si tabP[i].estEtudiant Alors
            Ecrire("-> age=", tabP[i].age, " cp=", tabP[i].adresse.codePostal)
        FinSi
    FinPour

    // --- Fonctions (retour) + appels imbriqués ---
    Ecrire("Factorielle(5)=", Factorielle(5))
    Ecrire("2^8=", Puissance(2.0, 8))
    Ecrire("PGCD(48,18)=", PGCD(48, 18))

    // --- Selon / Cas / Défaut ---
    DemoSelon(0)
    DemoSelon(2)
    DemoSelon(9)

Fin
